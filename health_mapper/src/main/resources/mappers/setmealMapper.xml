<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="health_mapper.SetmealMapper">
    <!--查询所有套餐-->
    <select id="findSetmeal" resultType="setmeal">
        select * from t_setmeal
        <if test="queryString != null and queryString.trim() !=''">
            where name like '%' #{queryString} '%' or helpCode = #{queryString} or code=#{queryString}
        </if>
    </select>

    <!--添加套餐-->
    <insert id="addSetmeal" useGeneratedKeys="true" keyColumn="id">
        insert into t_setmeal values(null , #{name},#{code},#{helpCode},#{sex},#{age},#{price},#{remark},#{attention},#{img})
    </insert>
    <!--添加套餐包含的检查组-->
    <insert id="addCheckGroups">
        insert into t_setmeal_checkgroup values
        <foreach collection="ids" item="id" separator=",">
            (#{groupId} , #{id})
        </foreach>
    </insert>
</mapper>